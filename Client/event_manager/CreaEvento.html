<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet"href="http://localhost:8080/style">
</head>
<body>
  <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>
  <script>
    function annulla(){
      window.location.href='http://localhost:8080/visualizzaeventi';
    }

    function inviaDati(){

      obj = {
        eventName : document.getElementById("eventName").value,
        eventDate : document.getElementById("eventDate").value,
        eventPlace : document.getElementById("eventPlace").value,
        eventNPosti : document.getElementById("eventNPosti").value,
        eventPrice : document.getElementById("eventPrice").value
        //eventStatus : $("input[type='radio'][name='stato']:checked").val()
      }

      if(obj.eventName == "" || obj.eventDate == "" || obj.eventPlace == "" || obj.eventNPosti == "" || obj.eventPrice == ""){
        document.getElementById("outputBox").innerHTML = "Controlla che tutti i campi siano valorizzati"
      } else {
        document.getElementById("outputBox").innerHTML = ""
        console.log(obj)
        $.ajax({
           type: "POST",
           url: "http://localhost:8080/nuovoevento",
           data: obj,
           success: function() {
             alert("Evento modificato correttamente!");
             window.location.href='http://localhost:8080/visualizzaeventi';
           }
        });
      }
    }
  </script>

<ul>
  <li><a href="http://localhost:8080/">Home</a></li>
  <li><a class="active" href="http://localhost:8080/creaevento">Crea Evento</a></li>
  <li><a href="http://localhost:8080/visualizzaeventi">Visualizza Eventi</a></li>
</ul>

<div style="padding:20px;margin-top:30px;background-color:#1abc9c;height:1500px;">
  <div class="formDati">
  <h1>Crea Evento</h1>

  <form id="input">
      <label>Nome dell'evento:</label><br>
      <input type='text' id='eventName' required><br>
      <label>Data dell'evento:</label><br>
      <input type='date' id='eventDate' required pattern="\d{4}-\d{2}-\d{2}"><br>
      <label>Luogo dell'evento:</label><br>
      <input type='text' id='eventPlace' required><br>
      <label>Numero posti:</label><br>
      <input type='text' id='eventNPosti' required><br>
      <label>Numero posti:</label><br>
      <input type='text' id='eventPrice' required><br>
      <p style ="color:red" id="outputBox"></p>
<!--
      <p>Stato:</p>
      <input type='radio' id="radioinVendita" name='stato' value='inVendita' checked = "checked">
      <label for='inVendita'>In vendita</label><br>
      <input type='radio' id="radioinCorso" name='stato' value='inCorso'>
      <label for='inCorso'>In corso</label><br>
      <input type='radio' id="radiosospeso" name='stato' value='sospeso'>
      <label for='sospeso'>Sospeso</label><br>
      <input type='radio' id="radiosoldout" name='stato' value='soldout'>
      <label for='soldout'>Sold out</label><br>
      <input type='radio' id="radiocancellato" name='stato' value='cancellato'>
      <label for='cancellato'>Cancellato</label><br>
      <input type='radio' id="radioterminato" name='stato' value='terminato'>
      <label for='terminato'>Terminato</label><br>
-->
    </form>
    <button class="bottone" onclick="inviaDati()"> Crea evento </button>
    <button class="bottone" style="background-color:#ff5252" onclick="annulla()"> Annulla </button>
</div>
</div>

</body>
</html>
