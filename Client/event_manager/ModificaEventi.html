<html>
<head>
<link rel="stylesheet"href="http://localhost:8080/style">
</head>
<body>
  <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>
  <script>
    window.addEventListener("load", function(){
      var stato = $("input[type='hidden'][id='stato']").val();
      document.getElementById("radio" + stato).checked = true;
    });

    function annulla(){
      window.location.href='http://localhost:8080/visualizzaeventi';
    }

    function inviaDati(){
      obj = {
        address : document.getElementById("address").value,
        eventName : document.getElementById("eventName").value,
        eventDate : document.getElementById("eventDate").value,
        eventPlace : document.getElementById("eventPlace").value,
        eventNPosti : document.getElementById("eventNPosti").value,
        eventStatus : $("input[type='radio'][name='stato']:checked").val()
      }
      console.log(obj)
      $.ajax({
         type: "POST",
         url: "http://localhost:8080/aggiornaevento",
         data: obj,
         success: function() {
           alert("Evento modificato correttamente!");
           window.location.href='http://localhost:8080/visualizzaeventi';
         }
      });

    }
  </script>

<ul>
  <li><a href="http://localhost:8080/">Home</a></li>
  <li><a href="http://localhost:8080/creaevento">Crea Evento</a></li>
  <li><a href="http://localhost:8080/visualizzaeventi">Visualizza Eventi</a></li>
</ul>

<div style="padding:20px;margin-top:30px;background-color:#1abc9c;height:1500px;">
  <h1>Modifica Evento</h1>

  <form>
      <input type='hidden' value='${address}' id="address">
      <input type='hidden' value='${evento.stato}' id="stato">
      <label for='fname'>Nome dell'evento:</label><br>
      <input type='text' value='${evento.nome}' id='eventName'><br>
      <label for='fname'>Data dell'evento:</label><br>
      <input type='text' value='${evento.data}' id='eventDate'><br>
      <label for='fname'>Luogo dell'evento:</label><br>
      <input type='text' value='${evento.luogo}' id='eventPlace'><br>
      <label for='fname'>Numero posti:</label><br>
      <input type='text' value='${evento.numPosti}' id='eventNPosti'><br>
      <p>Stato:</p>
      <input type='radio' id = "radioinVendita" name='stato' value='inVendita'>
      <label for='inVendita'>In vendita</label><br>
      <input type='radio' id = "radioinCorso" name='stato' value='inCorso'>
      <label for='inCorso'>In corso</label><br>
      <input type='radio' id = "radiosospeso" name='stato' value='sospeso'>
      <label for='sospeso'>Sospeso</label><br>
      <input type='radio' id = "radiosoldout" name='stato' value='soldout'>
      <label for='soldout'>Sold out</label><br>
      <input type='radio' id = "radiocancellato" name='stato' value='cancellato'>
      <label for='cancellato'>Cancellato</label><br>
      <input type='radio' id = "radioterminato" name='stato' value='terminato'>
      <label for='terminato'>Terminato</label><br>
      <!--<input type="submit" value="Modifica Evento">-->
    </form>
    <button onclick="inviaDati()"> Modifica evento </button>
    <button onclick="annulla()"> Annulla </button>


</div>

</body>
</html>
